<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UOSVD Visual Design 1&2</title>
    <style>
        @font-face {
            font-family: 'Pretendard';
            src: url('Pretendard-Regular.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
        }

        @font-face {
            font-family: 'GohuFont';
            src: url('GohuFontuni11NerdFontPropo-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #C0C0C0;
            font-family: 'Pretendard', sans-serif;
            overflow-x: hidden;
            overflow-y: scroll;
            position: relative;
        }

        #background-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .logo-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10000;
            pointer-events: none;
        }

        .logo {
            width: clamp(150px, 25vw, 200px);
            height: auto;
            opacity: 1;
        }

        .students-container {
            padding: clamp(20px, 5vw, 40px) clamp(15px, 3vw, 20px);
            display: flex;
            flex-direction: column;
            gap: clamp(15px, 3vw, 25px);
            align-items: center;
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
        }

        .student-item {
            position: relative;
            width: 100%;
            max-width: clamp(280px, 80vw, 450px);
            cursor: pointer;
        }

        .student-item img {
            width: 100%;
            height: auto;
            display: block;
            transition: filter 0.3s ease;
        }

        .student-item.active img {
            filter: blur(5px);
        }

        .student-item .student-name {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-family: 'GohuFont', monospace;
            font-size: clamp(12px, 2vw, 14px);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            white-space: nowrap;
            text-shadow: 0.5px 0.5px 1px rgba(0, 0, 0, 0.3);
        }

        .student-item:active .student-name,
        .student-item.active .student-name {
            opacity: 1;
        }

        /* Responsive adjustments */
        @media (min-width: 768px) {
            .students-container {
                padding: 50px 30px;
                gap: 30px;
            }

            .student-item {
                max-width: 500px;
            }
        }

        @media (min-width: 1024px) {
            .students-container {
                padding: 60px 40px;
                gap: 35px;
            }

            .student-item {
                max-width: 600px;
            }
        }

        @media (max-width: 480px) {
            .logo {
                width: 160px;
            }

            .students-container {
                padding: 20px 15px;
                gap: 15px;
            }

            .student-item {
                max-width: 100%;
                width: 95vw;
            }
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
</head>
<body>
    <div id="background-canvas"></div>

    <div class="logo-container">
        <img src="logo.svg" alt="UOSVD Visual Design 1&2" class="logo">
    </div>

    <div class="students-container" id="gallery">
        <!-- Images will be added dynamically -->
    </div>

    <script>
        // Background pixel animation
        let pixelSize = 10;
        let pixels = [];
        let colors = [
            { r: 72, g: 152, b: 251 },   // Blue #4898FB
            { r: 254, g: 182, b: 75 },   // Orange #FEB64B
            { r: 255, g: 75, b: 253 }    // Pink #FF4BFD
        ];

        function setup() {
            let canvas = createCanvas(windowWidth, windowHeight);
            canvas.parent('background-canvas');
            frameRate(60);
        }

        function draw() {
            clear();
            noStroke();

            // Draw existing pixels
            for (let i = pixels.length - 1; i >= 0; i--) {
                let p = pixels[i];
                let opacity = map(p.life, 0, p.maxLife, 0, 0.9);
                drawRisoPoint(p.x, p.y, p.size, p.color, opacity);

                // Move pixel randomly
                p.x += p.vx;
                p.y += p.vy;

                p.life--;
                if (p.life <= 0) {
                    pixels.splice(i, 1);
                }
            }

            // Generate new pixels at random positions
            if (frameCount % 5 === 0) {
                let numPixels = floor(random(1, 3));
                for (let i = 0; i < numPixels; i++) {
                    let x = floor(random(width) / pixelSize) * pixelSize;
                    let y = floor(random(height) / pixelSize) * pixelSize;
                    let maxLife = floor(random(40, 80));
                    pixels.push({
                        x: x,
                        y: y,
                        vx: random(-0.5, 0.5),
                        vy: random(-0.5, 0.5),
                        color: random(colors),
                        size: random([pixelSize * 2, pixelSize * 2.5, pixelSize * 3]),
                        life: maxLife,
                        maxLife: maxLife
                    });
                }
            }

            // Limit total pixels
            if (pixels.length > 100) {
                pixels.splice(0, pixels.length - 100);
            }
        }

        function drawRisoPoint(x, y, size, color, opacity) {
            let radius = size / 2;
            for (let i = -radius; i <= radius; i += pixelSize) {
                for (let j = -radius; j <= radius; j += pixelSize) {
                    let distance = sqrt(i * i + j * j);
                    if (distance <= radius) {
                        drawRisoPixel(x + i, y + j, color, opacity);
                    }
                }
            }
        }

        function drawRisoPixel(x, y, color, opacity) {
            let pixelX = floor(x / pixelSize) * pixelSize;
            let pixelY = floor(y / pixelSize) * pixelSize;
            if (pixelX < 0 || pixelX > width || pixelY < 0 || pixelY > height) {
                return;
            }
            fill(color.r, color.g, color.b, opacity * 255);
            rect(pixelX, pixelY, pixelSize, pixelSize);
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }
    </script>

    <script>
        // Korean to English name mapping
        const nameMapping = {
            '박성수': 'Sungsu Park',
            '이한나': 'Hanna Lee',
            '류시완': 'Siwan Ryu',
            '권민서': 'Minseo Kwon',
            '박지혜': 'Jihye Park',
            '신기준': 'Kijoone Shin',
            '최문형': 'Moonhyung Choi',
            '한서원': 'Seowon Han',
            '이소민': 'Somin Lee',
            '박지우': 'Jiwoo Park',
            '장혜원': 'Hyewon Jang',
            '이혜원': 'Hyewon Lee',
            '서정민': 'Jungmin Seo',
            '장민지': 'Minji Jang',
            '강민석': 'Minseok Kang',
            '유성헌': 'Sungheon Yu',
            '양지은': 'Jieun Yang',
            '윤자영': 'Jayoung Yoon',
            '노희지': 'Huiji Noh',
            '이시네': 'Shine Lee',
            '임채영': 'Chaeyoung Lim',
            '전소영': 'Soyoung Jeon'
        };

        // Extract Korean name from file path
        function extractKoreanName(path) {
            const filename = path.split('/')[1];
            const koreanName = filename.match(/^[\uAC00-\uD7A3]+/);
            return koreanName ? koreanName[0] : '';
        }

        // All images from show-all
        const allImages = [
            'collected/박성수book.png',
            'collected/이한나book.png',
            'collected/류시완book.gif',
            'collected/권민서book.png',
            'collected/박지혜book.png',
            'collected/신기준book.png',
            'collected/최문형book.png',
            'collected/한서원book.png',
            'collected/이소민book.png',
            'collected/박지우book.png',
            'collected/장혜원book.png',
            'collected/이혜원book.png',
            'collected/서정민book.png',
            'shape/권민서shape.png',
            'shape/박성수shape.png',
            'shape/박지혜shape.png',
            'shape/박지우shape.jpg',
            'shape/신기준shape.png',
            'shape/이소민shape.png',
            'shape/이한나shape.png',
            'shape/장민지shape.png',
            'shape/장혜원shape.png',
            'shape/최문형shape.png',
            'shape/한서원shape.png',
            'shape/서정민shape.png',
            'shape/이혜원shape.png',
            'shape/류시완shape.gif',
            'shape/이시네shape.png',
            'generative/신기준gen.png',
            'generative/이한나gen.png',
            'generative/한서원gen.png',
            'generative/장혜원gen.png',
            'generative/박지우gen.png',
            'generative/이혜원gen.png',
            'generative/권민서gen.png',
            'generative/최문형gen.png',
            'generative/박지혜gen.png',
            'generative/이소민gen.png',
            'generative/류시완gen.png',
            'generative/박성수gen.png',
            'generative/장민지gen.png',
            'generative/서정민gen.png',
            'self/신기준self.png',
            'self/이소민self.png',
            'self/강민석self.png',
            'self/이한나self.png',
            'self/박지혜self.png',
            'self/한서원self.png',
            'self/유성헌self.png',
            'self/양지은self.png',
            'self/이혜원self.png',
            'self/최문형self.png',
            'self/류시완self.png',
            'self/윤자영self.png',
            'self/권민서self.png',
            'self/노희지self.png',
            'self/서정민self.png',
            'self/박성수self.png',
            'self/장민지self.png',
            'self/이시네self.png',
            'self/임채영self.png',
            'self/장혜원self.png',
            'self/박지우self.png',
            'map/신기준map.png',
            'map/장혜원map.png',
            'map/이혜원map.png',
            'map/박지우map.jpg',
            'map/박지혜map.png',
            'map/최문형map.png',
            'map/류시완map.png',
            'map/권민서map.png',
            'map/이소민map.png',
            'map/이한나map.png',
            'map/박성수map.png',
            'map/서정민map.png',
            'map/한서원map.png'
        ];

        // Shuffle array
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Render images
        const shuffledImages = shuffleArray(allImages);
        const gallery = document.getElementById('gallery');

        shuffledImages.forEach((imgPath, index) => {
            const div = document.createElement('div');
            div.className = 'student-item';

            const img = document.createElement('img');
            img.src = imgPath;
            img.alt = `Image ${index + 1}`;
            img.loading = 'lazy';

            // Extract and add student name
            const koreanName = extractKoreanName(imgPath);
            const englishName = nameMapping[koreanName] || koreanName;

            const nameSpan = document.createElement('span');
            nameSpan.className = 'student-name';
            nameSpan.textContent = englishName;

            // Touch/hover interaction (same as show-all.html)
            // For mobile: :active pseudo-class will work automatically
            // For desktop preview: hover effect
            div.addEventListener('mouseenter', () => {
                div.classList.add('active');
            });

            div.addEventListener('mouseleave', () => {
                div.classList.remove('active');
            });

            div.appendChild(img);
            div.appendChild(nameSpan);
            gallery.appendChild(div);
        });
    </script>
</body>
</html>
